Key Decisions
================================================================================

Documents and explains key decisions that have been made regarding how
the HH CMART data is imported, managed and structured.

Initial Import
------------------------------------------------------------

Data is first imported to T_HH_R. The file 'Import HH CMART.R'
concatenates all of the Access files (both MDB and ACCDB) found in a
folder. It then uploads them to Oracle. If this import succeeds, the
data is copied to T_HH_TMP AND to T_HH_RAW.

That table T_HH_RAW is exactly what it sounds like. It is the entire,
unaltered data set maintained for historical record purposes. For the
most part, it can be ignored. This table contains duplications,
mistakes and general chicanery. You have been warned.

The table T_HH_TMP is the table we clean, to prepare it for import
into T_HH_CMART. Currently, the file, sql/Cleanup.sql is run manually
against T_HH_TMP. We need to develop a more formal QA process in
tests, but for now it is sufficient to understand that there is a back
and forth with T_HH_TMP that includes improving and furthering the
code found in Cleanup.sql until T_HH_TMP is ready to be imported into
T_HH_CMART.

It is at this stage that we should have a set of prepared reports that
we can quickly run to provide feedback on individual Health Home
submissions.

Once the data has been cleaned and verified, it is imported into
T_HH_CMART. In the event there is a duplication of a CIN in a Health
Home's quarterly submission, the row with the largest number in the ID
column will be kept. The other row(s) are thrown out. This decision
was made because an individual can have no more than one row per
quarter and this row should reflect his/her most recent status at the
end of the quarter. The CMART tool does not have a column indicating
which column was edited last, so we will have to use ID as a proxy for
the time being.

